For caffe is easy, just two files need to be changed. 
I modified the standard cross entropy loss function, but you can also rename and add it as separate loss function if you want to keep both versions of cross entropy.  

I used commit `df412ac0da3e2e7eb194f0c16842fd126496d90d`, so if you are using different version you might need to update the loss function code as well.
